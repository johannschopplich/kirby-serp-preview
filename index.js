(function(){"use strict";const b=/\/$|\/\?|\/#/,x=/^\.?\//;function y(o="",s){return s?b.test(o):o.endsWith("/")}function T(o="",s){if(!s)return o.endsWith("/")?o:o+"/";if(y(o,!0))return o||"/";let t=o,n="";const a=o.indexOf("#");if(a>=0&&(t=o.slice(0,a),n=o.slice(a),!t))return n;const[f,...u]=t.split("?");return f+"/"+(u.length>0?`?${u.join("?")}`:"")+n}function $(o){return o&&o!=="/"}function E(o,...s){let t=o||"";for(const n of s.filter(a=>$(a)))if(t){const a=n.replace(x,"");t=T(t)+a}else t=n;return t}const e=window.Vue;function C(){return window.panel}function P(){return C().api}function A(){const o=P();return{load:({parent:t,name:n})=>o.get(`${t}/sections/${n}`)}}function L(){var s;return((s=e.getCurrentInstance())==null?void 0:s.proxy).$store}const w=e.computed;e.customRef,e.defineAsyncComponent,e.defineComponent,e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly;const c=e.ref;e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots;const N=e.watch;e.watchEffect,e.watchPostEffect,e.watchSyncEffect;const j={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function I(o,s,t,n,a,f,u,h){var i=typeof o=="function"?o.options:o;s&&(i.render=s,i.staticRenderFns=t,i._compiled=!0),n&&(i.functional=!0),f&&(i._scopeId="data-v-"+f);var p;if(u?(p=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),a&&a.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(u)},i._ssrRegister=p):a&&(p=h?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),p)if(i.functional){i._injectStyles=p;var k=i.render;i.render=function(v,_){return p.call(_),k(v,_)}}else{var d=i.beforeCreate;i.beforeCreate=d?[].concat(d,p):[p]}return{exports:o,options:i}}const g={...j},O=Object.assign({inheritAttrs:!1},{__name:"SerpPreview",props:g,setup(o){const s=o,t=C(),n=L(),{load:a}=A(),f=c(),u=c(),h=c(),i=c(),p=c(),k=c(),d=c(),l=c(),v=c(),_=c(),m=c(""),R=w(()=>n.getters["content/values"]()),G=w(()=>m.value?new URL(m.value).pathname:""),M=w(()=>R.value[l.value]||v.value);N(()=>t.language.code,async()=>{S();const r=await t.api.get(t.view.path,{select:"previewUrl"});m.value=r.previewUrl},{immediate:!0});async function S(){const r=await a({parent:s.parent,name:s.name});f.value=U(r.label)||"SERP Preview",u.value=r.faviconUrl,i.value=r.siteTitle,p.value=r.siteUrl,d.value=r.titleSeparator,k.value=r.titleContentKey,l.value=r.descriptionContentKey,h.value=r.defaultTitle,v.value=r.defaultDescription,_.value=r.searchConsoleUrl}function U(r){return!r||typeof r=="string"?r:r[t.translation.code]??Object.values(r)[0]}return{__sfc:!0,propsDefinition:g,props:s,panel:t,store:n,load:a,label:f,faviconUrl:u,defaultTitle:h,siteTitle:i,siteUrl:p,titleContentKey:k,titleSeparator:d,descriptionContentKey:l,defaultDescription:v,searchConsoleUrl:_,previewUrl:m,currentContent:R,path:G,description:M,loadSectionProps:S,t:U,joinURL:E}}});var D=function(){var s=this,t=s._self._c,n=s._self._setupProxy;return t("k-section",{attrs:{label:n.label}},[t("div",{staticClass:"ksp-overflow-hidden ksp-rounded-[var(--input-rounded)] ksp-bg-[var(--input-color-back)] ksp-p-4"},[t("div",{staticClass:"ksp-mb-2 ksp-flex ksp-items-center ksp-gap-3"},[n.faviconUrl?t("figure",{staticClass:"ksp-inline-flex ksp-aspect-square ksp-h-[26px] ksp-w-[26px] ksp-items-center ksp-justify-center ksp-rounded-full ksp-border ksp-border-solid ksp-border-[#ecedef] ksp-bg-[#f1f3f4]"},[t("img",{staticClass:"ksp-block ksp-h-[18px] ksp-w-[18px]",attrs:{src:n.faviconUrl,alt:""}})]):s._e(),t("div",{staticClass:"ksp-flex ksp-flex-col"},[t("span",{staticClass:"ksp-text-sm ksp-text-[#4d5156]"},[s._v(s._s(n.siteTitle))]),t("span",{staticClass:"ksp-line-clamp-1 ksp-text-xs ksp-text-[#4d5156]"},[s._v(s._s(n.joinURL(n.siteUrl,n.path)))])])]),t("h3",{staticClass:"ksp-line-clamp-1 ksp-text-xl ksp-text-[#1a0dab]"},[s._v(" "+s._s(n.currentContent[n.titleContentKey]||n.defaultTitle||[n.panel.view.title,n.titleSeparator,n.siteTitle].join(" "))+" ")]),t("p",{directives:[{name:"show",rawName:"v-show",value:n.description,expression:"description"}],staticClass:"ksp-mt-1 ksp-line-clamp-2 ksp-text-sm ksp-text-[#4d5156]"},[s._v(" "+s._s(n.description)+" ")])]),t("k-button-group",{directives:[{name:"show",rawName:"v-show",value:n.searchConsoleUrl,expression:"searchConsoleUrl"}],staticClass:"ksp-mt-2 ksp-w-full"},[t("k-button",{attrs:{link:n.searchConsoleUrl,icon:"open",target:"_blank"}},[s._v(" Google Search Console ")])],1)],1)},K=[],V=I(O,D,K,!1,null,null,null,null);const B=V.exports;window.panel.plugin("johannschopplich/serp-preview",{sections:{"serp-preview":B}})})();
