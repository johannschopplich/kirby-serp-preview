(function(){"use strict";const L=/\/$|\/\?|\/#/,P=/^\.?\//;function T(n="",o){return o?L.test(n):n.endsWith("/")}function N(n="",o){if(!o)return n.endsWith("/")?n:n+"/";if(T(n,!0))return n||"/";let t=n,s="";const a=n.indexOf("#");if(a>=0&&(t=n.slice(0,a),s=n.slice(a),!t))return s;const[u,...f]=t.split("?");return u+"/"+(f.length>0?`?${f.join("?")}`:"")+s}function $(n=""){return n.startsWith("/")}function S(n=""){return $(n)?n:"/"+n}function E(n){return n&&n!=="/"}function w(n,...o){let t=n||"";for(const s of o.filter(a=>E(a)))if(t){const a=s.replace(P,"");t=N(t)+a}else t=s;return t}const e=window.Vue;function C(){return window.panel}function j(){return C().api}function A(){const n=j();return{load:({parent:t,name:s})=>n.get(`${t}/sections/${s}`)}}function I(){var o;return((o=e.getCurrentInstance())==null?void 0:o.proxy).$store}const k=e.computed;e.customRef,e.defineAsyncComponent,e.defineComponent,e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly;const c=e.ref;e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots;const O=e.watch;e.watchEffect,e.watchPostEffect,e.watchSyncEffect;const B={blueprint:String,lock:[Boolean,Object],help:String,name:String,parent:String,timestamp:Number};function K(){const n=C(),o=k(()=>n.languages.map(s=>s.code));return{locales:o,getNonLocalizedPath:s=>{const u=new URL(s).pathname.split("/").filter(Boolean);return o.value.includes(u[0])&&u.shift(),S(u.join("/"))}}}function V(n,o,t,s,a,u,f,_){var i=typeof n=="function"?n.options:n;o&&(i.render=o,i.staticRenderFns=t,i._compiled=!0),s&&(i.functional=!0),u&&(i._scopeId="data-v-"+u);var p;if(f?(p=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__<"u"&&(l=__VUE_SSR_CONTEXT__),a&&a.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(f)},i._ssrRegister=p):a&&(p=_?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),p)if(i.functional){i._injectStyles=p;var m=i.render;i.render=function(v,d){return p.call(d),m(v,d)}}else{var h=i.beforeCreate;i.beforeCreate=h?[].concat(h,p):[p]}return{exports:n,options:i}}const R={...B},z=Object.assign({inheritAttrs:!1},{__name:"SerpPreview",props:R,setup(n){const o=n,t=C(),s=I(),{load:a}=A(),{getNonLocalizedPath:u}=K(),f=c(),_=c(),i=c(),p=c(),m=c(),h=c(),l=c(),v=c(),d=c(),b=c(),g=c(""),x=k(()=>s.getters["content/values"]()),M=k(()=>{if(!g.value)return"";if(!t.multilang)return new URL(g.value).pathname;let r=u(g.value);return _.value?r=w(t.language.url,r):t.language.default||(r=w(t.language.url,r)),S(r)}),H=k(()=>x.value[v.value]||d.value);O(()=>t.language.code,async()=>{U();const r=await t.api.get(t.view.path,{select:"url"});g.value=r.url},{immediate:!0});async function U(){const r=await a({parent:o.parent,name:o.name});f.value=y(r.label)||"SERP Preview",_.value=r.defaultLanguagePrefix??!0,i.value=r.faviconUrl,p.value=r.siteTitle,m.value=r.siteUrl,l.value=r.titleSeparator,h.value=r.titleContentKey,v.value=r.descriptionContentKey,d.value=r.descriptionFallback,b.value=r.searchConsoleUrl}function y(r){return!r||typeof r=="string"?r:r[t.translation.code]??Object.values(r)[0]}return{__sfc:!0,propsDefinition:R,props:o,panel:t,store:s,load:a,getNonLocalizedPath:u,label:f,defaultLanguagePrefix:_,faviconUrl:i,siteTitle:p,siteUrl:m,titleContentKey:h,titleSeparator:l,descriptionContentKey:v,descriptionFallback:d,searchConsoleUrl:b,url:g,currentContent:x,path:M,description:H,loadSectionProps:U,t:y,joinURL:w}}});var D=function(){var o=this,t=o._self._c,s=o._self._setupProxy;return t("k-section",{attrs:{label:s.label}},[t("div",{staticClass:"ksp-overflow-hidden ksp-rounded-[var(--input-rounded)] ksp-bg-[var(--input-color-back)] ksp-p-4"},[t("div",{staticClass:"ksp-mb-2 ksp-flex ksp-items-center ksp-gap-3"},[s.faviconUrl?t("figure",{staticClass:"ksp-inline-flex ksp-aspect-square ksp-h-[26px] ksp-w-[26px] ksp-items-center ksp-justify-center ksp-rounded-full ksp-border ksp-border-solid ksp-border-[#ecedef] ksp-bg-[#f1f3f4]"},[t("img",{staticClass:"ksp-block ksp-h-[18px] ksp-w-[18px]",attrs:{src:s.faviconUrl,alt:""}})]):o._e(),t("div",{staticClass:"ksp-flex ksp-flex-col"},[t("span",{staticClass:"ksp-text-sm ksp-text-[#4d5156]"},[o._v(o._s(s.siteTitle))]),t("span",{staticClass:"ksp-line-clamp-1 ksp-text-xs ksp-text-[#4d5156]"},[o._v(o._s(s.joinURL(s.siteUrl,s.path)))])])]),t("h3",{staticClass:"ksp-line-clamp-1 ksp-text-xl ksp-text-[#1a0dab]"},[o._v(" "+o._s(s.currentContent[s.titleContentKey]||[s.panel.view.title,s.titleSeparator,s.siteTitle].join(" "))+" ")]),t("p",{directives:[{name:"show",rawName:"v-show",value:s.description,expression:"description"}],staticClass:"ksp-mt-1 ksp-line-clamp-2 ksp-text-sm ksp-text-[#4d5156]"},[o._v(" "+o._s(s.description)+" ")])]),t("k-button-group",{directives:[{name:"show",rawName:"v-show",value:s.searchConsoleUrl,expression:"searchConsoleUrl"}],staticClass:"ksp-mt-2 ksp-w-full"},[t("k-button",{attrs:{link:s.searchConsoleUrl,icon:"open",target:"_blank"}},[o._v(" Google Search Console ")])],1)],1)},F=[],W=V(z,D,F,!1,null,null,null,null);const G=W.exports;window.panel.plugin("johannschopplich/serp-preview",{sections:{"serp-preview":G}})})();
